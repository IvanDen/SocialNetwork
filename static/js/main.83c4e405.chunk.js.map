{"version":3,"sources":["components/Common/Paginator/Paginator.module.css","components/Login/Login.module.css","components/Common/Logo/Logo.module.css","components/Common/Preloader/Preloader.module.css","api/profile-api.ts","redux/profile-reduser.ts","img/list-users.png","redux/dialogs-reduser.ts","api/chat-api.ts","redux/chat-reduser.ts","img/loader.gif","img/socialLogo.png","api/api.ts","config.js","components/Main/Users/users.module.css","components/Main/News/News.tsx","components/Main/Music/Music.tsx","components/Main/Settings/Settings.tsx","redux/users-selectors.ts","components/Main/Users/Useritem.tsx","components/Common/Paginator/Paginator.tsx","components/Main/Users/UsersSearchForm.tsx","utils/object-helpers.ts","api/users-api.ts","redux/users-reduser.ts","components/Main/Users/Users.tsx","components/Main/Users/UsersContainer.tsx","api/auth-api.ts","api/security-api.ts","redux/auth-reduser.ts","redux/app-reduser.ts","redux/sidebar-reduser.ts","redux/redux-store.ts","hoc/withSuspense.tsx","components/Login/LoginPage.tsx","components/Common/Logo/Logo.tsx","components/Footer/footerContent.tsx","redux/auth-selectors.ts","components/Header/headerLoginInfo.tsx","App.tsx","serviceWorker.js","index.tsx","components/Common/FormsControls/FormsControls.tsx","hoc/withAuthRedirect.tsx","components/Common/Preloader/Preloader.tsx","utils/validators.ts","components/Common/FormsControls/FormsControls.module.css","components/Header/header.module.css"],"names":["module","exports","profileAPI","userId","instance","get","then","res","data","status","put","photoFile","formData","FormData","append","headers","profile","initialState","posts","id","message","likeCount","actions","addPost","newPostText","type","setUserProfile","setStatus","deletePost","postId","savePhotoSuccess","photos","getUserProfile","dispatch","a","getStatus","updateStatus","resultCode","alert","savePhoto","file","saveProfile","getState","auth","Error","stopSubmit","_error","messages","Promise","reject","profileReducer","state","action","newPost","filter","p","dialogs","name","messagesMe","defaultText","sendTextChat","newMessageBody","updateNewChatText","dialogsReducer","subscribers","ws","closeHandler","notifySubscribersAboutStatus","setTimeout","messageHandler","e","newMessages","JSON","parse","forEach","s","openHandler","errorHandler","console","error","cleanUp","removeEventListener","chatAPI","close","WebSocket","addEventListener","createChannel","eventName","callback","push","send","payload","_newMessageHandler","newMessageHandlerCreator","_statusChangedHandler","statusChangedHandlerCreator","startMessagesListening","stopMessagesListening","sendMessage","chatReducer","ResultCodesEnum","ResultCodesForCaptchaEnum","axios","create","withCredentials","baseURL","compose","withAuthRedirect","getUsersPage","createSelector","usersPage","users","u","getPageSize","pageSize","getTotalUsersCount","totalUsersCount","getCurrentPage","currentPage","getIsFetching","isFetching","getFollowingInProgress","followingInProgress","getUsersFilter","Useritem","user","unfollow","follow","className","styles","userItem","imgWrap","to","src","small","userPhoto","avatar","followed","disabled","some","subscribe","onClick","usersInfo","nameAndStatus","usersMainInfo","headInfo","userStatus","Paginator","onPageChanged","portionSize","pagesCount","Math","ceil","pages","i","portionCount","useState","portionNumber","setPortionNumber","leftPortionPageNumber","rightPortionPageNumber","on","Class","paginatorWrap","pageList","map","selectedPage","key","usersSearchFormValidate","values","UsersSearchForm","React","memo","props","useSelector","enableReinitialize","initialValues","term","friend","String","validate","onSubmit","setSubmitting","onFilterChanged","isSubmitting","style","border","as","value","updateObjectInArray","items","itemId","objPropName","neuObjProps","usersAPI","getUsers","response","post","unFollow","delete","count","requestUsers","page","totalCount","_followUnfollowFlow","apiMethod","actionCreator","usersReducer","Users","history","useHistory","useDispatch","useEffect","search","location","substring","parsed","queryString","actualPage","actualFilter","Number","query","pathname","bind","Follow","pageNumber","usersList","UsersPage","Preloader","AuthAPI","email","password","rememberMe","captcha","securityAPI","login","isAuth","captchaUrl","authUser","authData","Success","getCaptchaUrl","url","authReducer","initialized","appReducer","sidebarReducer","rootReducers","combineReducers","profilePage","dialogsPage","sidebar","form","formReducer","app","chat","composeEnhancers","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","store","createStore","applyMiddleware","thunkMiddleware","__store__","withSuspense","WrappedComponent","fallback","maxLength30","maxLengthCreator","LoginReduxForm","reduxForm","handleSubmit","createField","Input","requiredField","checkboxWrap","formSummaryError","LoginPage","formLogin","loginData","CaptchaIsRequired","length","Logo","logoWrap","logoLink","logo","LogoImg","alt","Footer","Layout","Header","FooterContent","textAlign","background","contentWrap","selectIsAuth","selectCurrentUserLogin","HeaderLoginInfo","span","theme","mode","defaultSelectedKeys","Item","loginBlock","backgroundColor","icon","UserOutlined","linc","isLogin","SubMenu","Menu","Content","Sider","DialogsContainer","lazy","ProfileContainer","ChatPage","SuspendedDialogs","SuspendedProfile","SuspendedChatPage","App","catchAllUnhandledErrors","PromiseRejection","log","this","initializeApp","minHeight","padding","margin","width","height","title","LaptopOutlined","NotificationOutlined","path","render","exact","Component","AppContainer","withRouter","connect","promise","all","SocialApp","Boolean","hostname","match","ReactDOM","document","getElementById","navigator","serviceWorker","ready","registration","unregister","FormControl","meta","touched","children","hasError","formControl","inputWrap","Textarea","input","restProps","htmlFor","placeholder","component","validateObj","text","formControlWrap","mapStateToPropsRedirect","wrap","loadingWap","loader","maxLength"],"mappings":"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","file":"static/js/main.83c4e405.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"paginatorWrap\":\"Paginator_paginatorWrap__3ZIU8\",\"pageList\":\"Paginator_pageList__5WS8X\",\"selectedPage\":\"Paginator_selectedPage__WGYll\",\"disabled\":\"Paginator_disabled__17zpO\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"formLogin\":\"Login_formLogin__N_nDH\",\"formControl\":\"Login_formControl__3M8qs\",\"error\":\"Login_error__3IsKb\",\"formSummaryError\":\"Login_formSummaryError__2ixL9\",\"checkboxWrap\":\"Login_checkboxWrap__1pRg1\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"logoWrap\":\"Logo_logoWrap__VlfST\",\"logoLink\":\"Logo_logoLink__28mGl\",\"logo\":\"Logo_logo__1NmY1\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrap\":\"Preloader_wrap__35phc\",\"loadingWap\":\"Preloader_loadingWap__1Cm5g\"};","import {PhotosType, ProfileType} from \"../Types/types\";\r\nimport {instance, APIResponseType} from \"./api\";\r\n\r\ntype SavePhotoResponseDataType = {\r\n\tphotos: PhotosType\r\n}\r\n\r\nexport const profileAPI = {\r\n\r\n\tgetProfile(userId: number) {\r\n\t\treturn instance.get<ProfileType>(`profile/${userId}`).then(res => res.data);\r\n\t},\r\n\tgetStatus(userId: number) {\r\n\t\treturn instance.get<string>(`profile/status/${userId}`).then(res => res.data);\r\n\t},\r\n\tupdateStatus(status: string) {\r\n\t\treturn instance.put<APIResponseType>(`profile/status`, {status: status}).then(res => res.data);\r\n\t},\r\n\tsavePhoto(photoFile: File) {\r\n\t\tconst formData = new FormData();\r\n\t\tformData.append(\"image\", photoFile);\r\n\t\treturn instance.put<APIResponseType<SavePhotoResponseDataType>>(`profile/photo`, formData, {\r\n\t\t\theaders: {\r\n\t\t\t\t'Content-Type': 'multipart/form-data'\r\n\t\t\t}\r\n\t\t}).then(res => res.data);\r\n\t},\r\n\tsaveProfile(profile: ProfileType) {\r\n\t\treturn instance.put<APIResponseType>(`profile`, profile).then(res => res.data);\r\n\t}\r\n}\r\n","import {FormAction, stopSubmit} from \"redux-form\";\r\nimport {PhotosType, PostsType, ProfileType} from \"../Types/types\";\r\nimport {usersAPI} from \"../api/users-api\";\r\nimport {profileAPI} from \"../api/profile-api\";\r\nimport {BaseThunkType, InferActionsTypes} from \"./redux-store\";\r\n\r\nlet initialState = {\r\n    posts: [\r\n        {id: 1, message: 'Hi, how are you?', likeCount: 25},\r\n        {id: 2, message: 'It is my post!', likeCount: 21},\r\n        {id: 3, message: 'This is my post to!', likeCount: 5}\r\n    ] as Array<PostsType>,\r\n    profile: null as ProfileType | null,\r\n    status: \"\"\r\n};\r\n\r\nexport type InitialStateType = typeof initialState;\r\ntype ActionsType = InferActionsTypes<typeof actions>;\r\ntype ThunkType = BaseThunkType<ActionsType | FormAction>;\r\n\r\nconst profileReducer = (state = initialState, action: ActionsType): InitialStateType => {\r\n\r\n    switch (action.type) {\r\n        case 'SN/PROFILE/ADD_POST': {\r\n            let newPost = {\r\n                id: 5,\r\n                newPostText: '',\r\n                message: action.newPostText,\r\n                likeCount: 0\r\n            };\r\n            return {\r\n                ...state,\r\n                posts: [...state.posts, newPost]\r\n\r\n            };\r\n        }\r\n        case 'SN/PROFILE/SET_USER_PROFILE': {\r\n            return{\r\n                ...state,\r\n                profile: action.profile\r\n            };\r\n        }\r\n        case 'SN/PROFILE/SET_STATUS': {\r\n            return{\r\n                ...state,\r\n                status: action.status\r\n            };\r\n        }\r\n        case 'SN/PROFILE/DELETE_POST': {\r\n            return {\r\n                ...state,\r\n                posts: state.posts.filter(p => p.id != action.postId)\r\n            };\r\n        }\r\n        case 'SN/PROFILE/SAVE_PHOTO': {\r\n            return {\r\n                ...state,\r\n                profile: {...state.profile, photos: action.photos} as ProfileType\r\n            };\r\n        }\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport const actions = {\r\n    addPost: (newPostText: string) => ({type: 'SN/PROFILE/ADD_POST', newPostText} as const),\r\n    setUserProfile: (profile: ProfileType) => ({type: 'SN/PROFILE/SET_USER_PROFILE', profile } as const),\r\n    setStatus: (status: string) => ({type: 'SN/PROFILE/SET_STATUS', status } as const),\r\n    deletePost: (postId: number) => ({type: 'SN/PROFILE/DELETE_POST', postId} as const),\r\n    savePhotoSuccess: (photos: PhotosType)=> ({type: 'SN/PROFILE/SAVE_PHOTO', photos} as const),\r\n}\r\n//thunk\r\nexport const getUserProfile = (userId: number): ThunkType => async (dispatch) => {\r\n    const data = await profileAPI.getProfile(userId);\r\n    dispatch(actions.setUserProfile(data));\r\n};\r\n\r\nexport const getStatus = (userId: number): ThunkType => async (dispatch) => {\r\n    const data = await profileAPI.getStatus(userId);\r\n    dispatch(actions.setStatus(data));\r\n};\r\n\r\nexport const updateStatus = (status: string): ThunkType => async (dispatch) => {\r\n    try {\r\n        const data = await profileAPI.updateStatus(status);\r\n        if (data.resultCode === 0) {\r\n            dispatch(actions.setStatus(status));\r\n        }\r\n    }\r\n    catch(error) {\r\n        alert(\"An unexpected error has occurred, try again.\");\r\n    }\r\n\r\n};\r\n\r\nexport const savePhoto = (file: File): ThunkType => async (dispatch) => {\r\n    const data = await profileAPI.savePhoto(file);\r\n\r\n    if (data.resultCode === 0) {\r\n        dispatch(actions.savePhotoSuccess(data.data.photos));\r\n    }\r\n};\r\n\r\nexport const saveProfile = (profile: ProfileType): ThunkType => async (dispatch, getState) => {\r\n    const userId = getState().auth.userId;\r\n    const data = await profileAPI.saveProfile(profile);\r\n\r\n    if (data.resultCode === 0) {\r\n        if (userId !== null) {\r\n            await dispatch(getUserProfile(userId));\r\n        }\r\n        else {\r\n            throw new Error(\"User ID is null!!\");\r\n        }\r\n    }\r\n    else {\r\n        dispatch(stopSubmit(\"edit-profile\", {_error: data.messages[0]}));\r\n        return Promise.reject(data.messages[0]);\r\n    }\r\n};\r\n\r\nexport default profileReducer;\r\n","module.exports = \"data:image/png;base64,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\"","import { InferActionsTypes } from \"./redux-store\";\r\n\r\ntype DialogType = {\r\n    id: number\r\n    name: string\r\n}\r\n\r\ntype MessagesType = {\r\n    id: number\r\n    likeCount: number\r\n    message: string\r\n}\r\n\r\nexport type InitialStateType = typeof initialState;\r\ntype ActionsType = InferActionsTypes<typeof actions>;\r\n\r\nlet initialState = {\r\n    dialogs: [\r\n        {id: 1, name: 'Dima'},\r\n        {id: 2, name: 'Olga'},\r\n        {id: 3, name: 'Lilia'},\r\n        {id: 4, name: 'Vitya'},\r\n        {id: 5, name: 'Misha'},\r\n        {id: 6, name: 'Stas'},\r\n        {id: 7, name: 'Robot'},\r\n        {id: 8, name: 'Georgi'},\r\n        {id: 9, name: 'Valera'},\r\n        {id: 10, name: 'Bender'}\r\n    ] as Array<DialogType>,\r\n    messagesMe: [\r\n        {id: 2, likeCount: 0, message: 'I am a normal. I can have text and everything.'}\r\n\r\n    ] as Array<MessagesType>,\r\n    messages: [\r\n        {id: 1, likeCount: 0, message: 'A normal popover and I can have text and everything.'}\r\n    ] as Array<MessagesType>,\r\n    defaultText: \"\" as string\r\n};\r\n\r\n\r\n\r\nconst dialogsReducer = (state = initialState, action: ActionsType): InitialStateType => {\r\n\r\n    switch (action.type) {\r\n        case 'SN/DIALOGS/SEND-TEXT-CHAT':\r\n            return {\r\n                ...state,\r\n                messagesMe: [...state.messagesMe, {id: 15, likeCount: 0, message: action.newMessageBody}]\r\n            };\r\n        case 'SN/DIALOGS/UPDATE-NEW-CHAT':\r\n            return {\r\n                ...state,\r\n                defaultText: action.defaultText\r\n            };\r\n\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport const actions = {\r\n    sendTextChat: (newMessageBody: string) => ({type: 'SN/DIALOGS/SEND-TEXT-CHAT', newMessageBody} as const),\r\n    updateNewChatText: (defaultText: string) => ({type: 'SN/DIALOGS/UPDATE-NEW-CHAT', defaultText } as const),\r\n}\r\n\r\n\r\nexport default dialogsReducer;\r\n","export interface IChatMessage {\r\n\tmessage: string;\r\n\tphoto: string;\r\n\tuserId: number;\r\n\tuserName: string;\r\n}\r\nexport type StatusType = 'pending' | 'ready' | 'error';\r\nexport type MessagesReceivedSubscriberType = (messages: IChatMessage[]) => void;\r\nexport type StatusChangedSubscriberType = (status: StatusType) => void;\r\n\r\nconst subscribers = {\r\n\t'messages-received': [] as MessagesReceivedSubscriberType[],\r\n\t'status-changed': [] as StatusChangedSubscriberType[],\r\n}\r\n\r\nlet ws: WebSocket | null = null;\r\n\r\ntype EventsNamesType = 'messages-received' | 'status-changed';\r\n\r\nconst closeHandler = () => {\r\n\tnotifySubscribersAboutStatus('pending');\r\n\tsetTimeout(closeHandler, 3000);\r\n}\r\n\r\nconst messageHandler = (e: MessageEvent) => {\r\n\tconst newMessages = JSON.parse(e.data);\r\n\tsubscribers['messages-received'].forEach(s => s(newMessages));\r\n};\r\n\r\nconst openHandler = () => {\r\n\tnotifySubscribersAboutStatus(\"ready\");\r\n};\r\n\r\nconst errorHandler = () => {\r\n\tnotifySubscribersAboutStatus(\"error\");\r\n\tconsole.error('RESTART PAGE!');\r\n};\r\n\r\nconst cleanUp = () => {\r\n\tws?.removeEventListener('close', closeHandler);\r\n\tws?.removeEventListener('message', messageHandler);\r\n\tws?.removeEventListener('open', openHandler);\r\n\tws?.removeEventListener('error', errorHandler);\r\n}\r\n\r\nconst notifySubscribersAboutStatus = (status: StatusType) => {\r\n\tsubscribers['status-changed'].forEach(s => s(status));\r\n}\r\n\r\nfunction createChannel() {\r\n\tcleanUp();\r\n\tws?.close();\r\n\tws = new WebSocket('wss://social-network.samuraijs.com/handlers/ChatHandler.ashx');\r\n\tnotifySubscribersAboutStatus('pending');\r\n\tws.addEventListener('close', closeHandler);\r\n\tws.addEventListener('message', messageHandler);\r\n\tws.addEventListener('open', openHandler);\r\n\tws.addEventListener('error', errorHandler);\r\n}\r\n\r\nexport const chatAPI = {\r\n\tstart() {\r\n\t\tcreateChannel()\r\n\t},\r\n\tstop() {\r\n\t\tsubscribers['messages-received'] = [];\r\n\t\tsubscribers['status-changed'] = [];\r\n\t\tcleanUp();\r\n\t\tws?.close();\r\n\t},\r\n\tsubscribe(eventName: EventsNamesType, callback: MessagesReceivedSubscriberType | StatusChangedSubscriberType) {\r\n\t\t// @ts-ignore\r\n\t\tsubscribers[eventName].push(callback);\r\n\t\treturn () => {\r\n\t\t\t// @ts-ignore\r\n\t\t\tsubscribers[eventName] = subscribers[eventName].filter(s => s !== callback);\r\n\t\t}\r\n\t},\r\n\tunsubscribe(eventName: EventsNamesType, callback: MessagesReceivedSubscriberType | StatusChangedSubscriberType) {\r\n\t\t// @ts-ignore\r\n\t\tsubscribers[eventName] = subscribers[eventName].filter(s => s !== callback);\r\n\t},\r\n\tsendMessage(message: string) {\r\n\t\tws?.send(message);\r\n\t}\r\n}\r\n","import {Dispatch} from 'redux';\r\nimport {FormAction} from \"redux-form\";\r\nimport {BaseThunkType, InferActionsTypes} from \"./redux-store\";\r\nimport {chatAPI, IChatMessage, StatusType} from \"../api/chat-api\";\r\n\r\n\r\n\r\nlet initialState = {\r\n    messages: [] as IChatMessage[],\r\n    status: 'pending' as StatusType\r\n};\r\ntype InitialStateType = typeof initialState;\r\ntype ActionsType = InferActionsTypes<typeof actions>;\r\ntype ThunkType = BaseThunkType<ActionsType | FormAction>;\r\n\r\nconst chatReducer = (state = initialState, action: ActionsType): InitialStateType => {\r\n\r\n    switch (action.type) {\r\n        case 'SN/chat/MESSAGES_RECEIVED':\r\n            return {\r\n                ...state,\r\n                messages: [...state.messages, ...action.payload.messages],\r\n            }\r\n        case 'SN/chat/STATUS_CHANGED':\r\n            return {\r\n                ...state,\r\n                status: action.payload.status\r\n            }\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport const actions = {\r\n    messagesReceived: (messages: IChatMessage[]) => ({\r\n        type: 'SN/chat/MESSAGES_RECEIVED',  payload: {messages}\r\n    } as const),\r\n    statusChanged: (status: StatusType) => ({\r\n        type: 'SN/chat/STATUS_CHANGED',  payload: {status}\r\n    } as const)\r\n}\r\n\r\nlet _newMessageHandler: ((messages: IChatMessage[]) => void) | null = null;\r\nconst newMessageHandlerCreator = (dispatch: Dispatch) => {\r\n    if(_newMessageHandler === null) {\r\n        _newMessageHandler = (messages) => dispatch(actions.messagesReceived(messages));\r\n    }\r\n    return _newMessageHandler;\r\n}\r\n\r\nlet _statusChangedHandler: ((messages: StatusType) => void) | null = null;\r\nconst statusChangedHandlerCreator = (dispatch: Dispatch) => {\r\n    if(_statusChangedHandler === null) {\r\n        _statusChangedHandler = (status) => dispatch(actions.statusChanged(status));\r\n    }\r\n    return _statusChangedHandler;\r\n}\r\n\r\nexport const startMessagesListening = (): ThunkType => async (dispatch) => {\r\n    chatAPI.start();\r\n    chatAPI.subscribe('messages-received', newMessageHandlerCreator(dispatch));\r\n    chatAPI.subscribe('status-changed', statusChangedHandlerCreator(dispatch));\r\n}\r\n\r\nexport const stopMessagesListening = (): ThunkType => async (dispatch) => {\r\n    chatAPI.unsubscribe('messages-received', newMessageHandlerCreator(dispatch));\r\n    chatAPI.unsubscribe('status-changed', statusChangedHandlerCreator(dispatch));\r\n    chatAPI.stop();\r\n}\r\n\r\nexport const sendMessage = (message: string): ThunkType => async (dispatch) => {\r\n    chatAPI.sendMessage(message);\r\n}\r\n\r\nexport default chatReducer;\r\n","module.exports = __webpack_public_path__ + \"static/media/loader.1385f237.gif\";","module.exports = __webpack_public_path__ + \"static/media/socialLogo.6625e77a.png\";","import axios from \"axios/index\";\r\nimport {UsersType} from '../Types/types';\r\nimport {appConfig} from '../config';\r\n\r\n\r\n// it is dal level\r\nexport const instance = axios.create({\r\n    withCredentials: true,\r\n    baseURL: 'https://social-network.samuraijs.com/api/1.0/',\r\n    headers: {\r\n        'API-KEY': appConfig.API_KEY\r\n    },\r\n});\r\n\r\nexport enum ResultCodesEnum {\r\n    Success = 0,\r\n    Error = 1,\r\n}\r\nexport enum ResultCodesForCaptchaEnum {\r\n    CaptchaIsRequired = 10,\r\n}\r\n\r\nexport type GetUsersItems = {\r\n    items: Array<UsersType>;\r\n    totalCount: number;\r\n    error: string | null;\r\n}\r\n\r\n\r\nexport type APIResponseType<D = {}, RC = ResultCodesEnum> = {\r\n    data: D\r\n    messages: Array<string>\r\n    resultCode: RC\r\n}\r\n","export const appConfig = {\r\n\tAPI_KEY: '398985eb-4255-4493-8c11-1485e18de5ee'\r\n};\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"users\":\"users_users__2wtBR\",\"pageList\":\"users_pageList__2qRQm\",\"selectedPage\":\"users_selectedPage__377zg\",\"usersList\":\"users_usersList__2XZT3\",\"usersMainInfo\":\"users_usersMainInfo__3K_iU\",\"headInfo\":\"users_headInfo__aN7dw\",\"userItem\":\"users_userItem__YAkx0\",\"usersInfo\":\"users_usersInfo__1X8zO\",\"userStatus\":\"users_userStatus__2hBwq\",\"imgWrap\":\"users_imgWrap__1Y7Uh\",\"nameAndStatus\":\"users_nameAndStatus__2Pecp\",\"avatar\":\"users_avatar__1h0sv\",\"subscribe\":\"users_subscribe__2ha0R\"};","import React from 'react';\r\nimport Class from './News.module.css';\r\nimport {compose} from \"redux\";\r\nimport {withAuthRedirect} from \"../../../hoc/withAuthRedirect\";\r\n\r\n\r\n\r\nconst News: React.FC = () => {\r\n    return (\r\n        <div>\r\n            News\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default compose(\r\n    withAuthRedirect\r\n)(News);\r\n","import React from 'react';\r\n\r\nimport {connect} from \"react-redux\";\r\nimport Dialogs from \"../Dialogs/Dialogs\";\r\nimport {compose} from \"redux\";\r\nimport {withAuthRedirect} from \"../../../hoc/withAuthRedirect\";\r\n\r\n\r\n\r\nconst Music: React.FC = () => {\r\n    return (\r\n        <div>\r\n            Music\r\n        </div>\r\n    );\r\n}\r\n\r\n\r\nexport default compose(\r\n    withAuthRedirect\r\n)(Music);\r\n","import React from 'react';\r\nimport Class from './Settings.module.css';\r\nimport {compose} from \"redux\";\r\nimport {withAuthRedirect} from \"../../../hoc/withAuthRedirect\";\r\n\r\n\r\n\r\nconst Settings: React.FC = () => {\r\n    return (\r\n        <div>\r\n            Settings\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default compose(\r\n    withAuthRedirect\r\n)(Settings);\r\n","import {createSelector} from \"reselect\";\r\nimport {AppStateType} from \"./redux-store\";\r\n\r\n// select is a function that takes a state and returns a value.\r\n// We necessary reselect lib (function createSelector)\r\nexport const getUsersSelector = (state: AppStateType) => {//simple select\r\n    return state.usersPage.users;\r\n}\r\n\r\nexport const getUsersPage = createSelector(getUsersSelector, (users) => {\r\n    return users.filter(u => true);\r\n});\r\n\r\nexport const getPageSize = (state: AppStateType) => {\r\n    return state.usersPage.pageSize;\r\n}\r\n\r\nexport const getTotalUsersCount = (state: AppStateType) => {\r\n    return state.usersPage.totalUsersCount;\r\n}\r\n\r\nexport const getCurrentPage = (state: AppStateType) => {\r\n    return state.usersPage.currentPage;\r\n}\r\n\r\nexport const getIsFetching = (state: AppStateType) => {\r\n    return state.usersPage.isFetching;\r\n}\r\n\r\nexport const getFollowingInProgress = (state: AppStateType) => {\r\n    return state.usersPage.followingInProgress;\r\n}\r\n\r\nexport const getUsersFilter = (state: AppStateType) => {\r\n    return state.usersPage.filter;\r\n}\r\n\r\n","import React from 'react';\r\nimport styles from './users.module.css';\r\nimport {NavLink} from \"react-router-dom\";\r\nimport userPhoto from \"../../../img/list-users.png\";\r\nimport {UsersType} from \"../../../Types/types\";\r\n\r\ntype UserItemPropsType = {\r\n    user: UsersType;\r\n    followingInProgress: number[];\r\n    unfollow: (userId: number) => void;\r\n    follow: (userId: number) => void;\r\n}\r\n\r\nexport const Useritem: React.FC<UserItemPropsType> = ({user, followingInProgress, unfollow, follow}) => {\r\n\r\n    return (\r\n        <div className={styles.userItem}>\r\n            <div className={styles.imgWrap}>\r\n                <div>\r\n                    <NavLink to={'/profile/' + user.id}>\r\n                        <img src={user.photos.small != null ? user.photos.small : userPhoto} className={styles.avatar} />\r\n                    </NavLink>\r\n                </div>\r\n                <div>\r\n                    {user.followed\r\n                        ? <button disabled={followingInProgress.some(id => id === user.id)}\r\n                                  className={`${styles.subscribe}`}\r\n                                  onClick={() => {\r\n                                      unfollow(user.id);\r\n                                  }}>Unfollow</button>\r\n\r\n                        : <button disabled={followingInProgress.some(id => id === user.id)}\r\n                                  className={`${styles.subscribe}`}\r\n                                  onClick={() => {\r\n                                      follow(user.id);\r\n                                  }}>Follow</button>}\r\n                </div>\r\n            </div>\r\n            <div className={styles.usersInfo}>\r\n                <div className={styles.nameAndStatus}>\r\n                    <div className={styles.usersMainInfo}>\r\n                        <span className={styles.headInfo}>User name: </span>\r\n                        <span >{user.name}</span>\r\n                    </div>\r\n                    <div className={`${styles.usersMainInfo} ${styles.userStatus}`}>\r\n                        <span className={styles.headInfo}>Users status: </span>\r\n                        {user.status\r\n                            ? <span>{user.status}</span>\r\n                            : <span>--------</span>\r\n                        }\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\n","import React, {useState} from 'react';\r\nimport Class from './Paginator.module.css';\r\nimport on from \"classnames\";\r\n//Allows you to write classes in a string.\r\n\r\ntype PropsType = {\r\n    totalUsersCount: number\r\n    pageSize: number\r\n    currentPage: number\r\n    onPageChanged: (pageNumber: number) => void\r\n    portionSize?: number\r\n};\r\n\r\nconst Paginator: React.FC<PropsType> = ({totalUsersCount, pageSize, currentPage, onPageChanged, portionSize = 10}) => {\r\n\r\n    let pagesCount: number = Math.ceil(totalUsersCount / pageSize);\r\n    let pages: number[] = [];\r\n    for (let i=1; i <= pagesCount; i++) {\r\n        pages.push(i);\r\n    }\r\n    let portionCount: number = Math.ceil(pagesCount / portionSize);\r\n    let [portionNumber, setPortionNumber] = useState<number>(1);\r\n    let leftPortionPageNumber: number = (portionNumber - 1) * portionSize + 1;\r\n    let rightPortionPageNumber: number = portionNumber * portionSize;\r\n\r\n    return (\r\n        <div className={on(Class.paginatorWrap)}>\r\n            <div className={on(Class.pageList)}>\r\n                {portionNumber > 1\r\n                    ? <button onClick={() => {setPortionNumber(portionNumber - 1)}}>prev</button>\r\n                    : <button disabled >prev</button>}\r\n                {pages\r\n                    .filter(p => p >= leftPortionPageNumber && p <= rightPortionPageNumber)\r\n                    .map((p) => {\r\n                        return <span className={on({[Class.selectedPage]: currentPage === p})}\r\n                                     key={p}\r\n                                     onClick={(e) => {onPageChanged(p);\r\n                                     }}>{p}</span>\r\n                    })}\r\n                {portionCount > portionNumber\r\n                    ? <button onClick={() => {setPortionNumber(portionNumber + 1)}}>next</button>\r\n                    : <button disabled >next</button>}\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Paginator;\r\n","import {Field, Form, Formik} from \"formik\";\r\nimport React from \"react\";\r\nimport { FilterType } from \"../../../redux/users-reduser\";\r\nimport {useSelector} from \"react-redux\";\r\nimport {getUsersFilter} from \"../../../redux/users-selectors\";\r\n\r\nconst usersSearchFormValidate = (values: any): any => {\r\n\tconst errors = {};\r\n\treturn errors;\r\n}\r\n\r\ntype FriendFormType = \"true\" | \"false\" | \"null\";\r\ntype FormType = {\r\n\tterm: string;\r\n\tfriend: FriendFormType;\r\n}\r\n\r\ntype PropsType = {\r\n\tonFilterChanged: (filter: FilterType) => void\r\n}\r\n\r\nexport const UsersSearchForm: React.FC<PropsType> = React.memo((props) => {\r\n\r\n\tconst filter = useSelector(getUsersFilter);\r\n\r\n\tconst submit = (values: FormType, {setSubmitting}: { setSubmitting: (isSubmitting: boolean) => void }) => {\r\n\t// To-Do Сделать коректный конвертор значений для селекта\r\n\t\tconst filter: FilterType = {\r\n\t\t\tterm: values.term,\r\n\t\t\tfriend: values.friend === \"null\" ? null : values.friend === \"true\" ? true : false\r\n\t\t}\r\n\r\n\t\tprops.onFilterChanged(filter);\r\n\t\tsetSubmitting(false);\r\n\t}\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<Formik\r\n\t\t\t\tenableReinitialize\r\n\t\t\t\tinitialValues={{term: filter.term, friend: String(filter.friend) as FriendFormType}}\r\n\t\t\t\tvalidate={usersSearchFormValidate}\r\n\r\n\t\t\t\tonSubmit={submit}\r\n\t\t\t>\r\n\t\t\t\t{({isSubmitting}) => (\r\n\t\t\t\t\t<Form>\r\n\t\t\t\t\t\t<Field style={{border: '1px solid #000508'}} type=\"text\" name=\"term\"/>\r\n\t\t\t\t\t\t<Field name=\"friend\" as=\"select\">\r\n\t\t\t\t\t\t\t<option value=\"null\">All</option>\r\n\t\t\t\t\t\t\t<option value=\"false\">Only followed</option>\r\n\t\t\t\t\t\t\t<option value=\"true\">only unfollowed</option>\r\n\t\t\t\t\t\t</Field>\r\n\t\t\t\t\t\t<button type=\"submit\" disabled={isSubmitting}>\r\n\t\t\t\t\t\t\tSubmit\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</Form>\r\n\t\t\t\t)}\r\n\t\t\t</Formik>\r\n\t\t</div>\r\n\t);\r\n});\r\n","export const  updateObjectInArray = (items: any, itemId: any, objPropName: any, neuObjProps: any) => {\r\n\r\n    return items.map((user: any) => {\r\n        if (user[objPropName] === itemId) {\r\n            return {...user, ...neuObjProps}\r\n        }\r\n        return user;\r\n    })\r\n}\r\n","import {GetUsersItems, instance, APIResponseType} from \"./api\";\r\nimport {FilterType} from \"../redux/users-reduser\";\r\n\r\n\r\n\r\nexport const usersAPI = {\r\n\tgetUsers(currentPage = 1, pageSize = 10, filter: FilterType) {\r\n\t\treturn instance.get<GetUsersItems>(`users?page=${currentPage}&count=${pageSize}&term=${filter.term ? filter.term : \"\"}` + (filter.friend === null ? '' : `&friend=${filter.friend}`))\r\n\t\t\t.then(response => response.data);\r\n\t},\r\n\tfollow(userId: number) {\r\n\r\n\t\treturn instance.post<APIResponseType>(`follow/${userId}`)\r\n\t\t\t.then(response => response.data);\r\n\t},\r\n\tunFollow(userId: number) {\r\n\r\n\t\treturn instance.delete(`follow/${userId}`)\r\n\t\t\t.then(response => response.data) as Promise<APIResponseType>;\r\n\t}\r\n}\r\n","import {updateObjectInArray} from \"../utils/object-helpers\";\r\nimport {UsersType} from \"../Types/types\";\r\nimport {BaseThunkType, InferActionsTypes} from \"./redux-store\";\r\nimport {Dispatch} from \"redux\";\r\nimport {usersAPI} from \"../api/users-api\";\r\nimport {APIResponseType} from \"../api/api\";\r\n\r\n\r\nlet initialState = {\r\n    users: [] as UsersType[],\r\n    pageSize: 10,\r\n    totalUsersCount: 0,\r\n    currentPage: 1,\r\n    isFetching: false,\r\n    followingInProgress: [] as number[],// array of users id\r\n    filter: {\r\n        term: \"\",\r\n        friend: null as null | boolean\r\n\r\n    }\r\n};\r\n\r\nexport type InitialStateType = typeof initialState;\r\nexport type FilterType = typeof initialState.filter;\r\ntype ActionsType = InferActionsTypes<typeof actions>;\r\ntype ThunkType = BaseThunkType<ActionsType>;\r\n\r\n\r\nconst usersReducer = (state = initialState, action: ActionsType): InitialStateType => {\r\n\r\n    switch (action.type) {\r\n        case 'SN/USERS/FOLLOW':\r\n            return {\r\n                ...state,\r\n                users: updateObjectInArray(\r\n                    state.users,\r\n                    action.userId,\r\n                    \"id\",\r\n                    {followed: true}\r\n                    )\r\n            };\r\n        case 'SN/USERS/UNFOLLOW':\r\n            return {\r\n                ...state,\r\n                users: updateObjectInArray(\r\n                    state.users,\r\n                    action.userId,\r\n                    \"id\",\r\n                    {followed: false}\r\n                    )\r\n            };\r\n        case 'SN/USERS/SET_USERS':\r\n            return {\r\n                ...state,\r\n                users: action.users\r\n            };\r\n            case 'SN/USERS/SET_CURRENT_PAGE':\r\n            return {\r\n                ...state,\r\n                currentPage: action.currentPage\r\n            };\r\n        case 'SN/USERS/SET_TOTAL_USERS_COUNT':\r\n            return {\r\n                ...state,\r\n                totalUsersCount: action.count\r\n            };\r\n        case 'SN/USERS/TOGGLE_IS_FETCHING':\r\n            return {\r\n                ...state,\r\n                isFetching: action.isFetching\r\n            };\r\n        case 'SN/USERS/SET_FILTER': {\r\n            return {...state, filter: action.payload}\r\n        }\r\n        case 'SN/USERS/TOGGLE_IS_FOLLOWING_PROGRESS':\r\n            return {\r\n                ...state,\r\n                followingInProgress: action.isFetching\r\n                    ? [...state.followingInProgress, action.userId]\r\n                    : state.followingInProgress.filter(id => id != action.userId)\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport const actions = {\r\n    followSuccess: (userId: number) => ({type: 'SN/USERS/FOLLOW', userId} as const),\r\n    unfollowSuccess:(userId: number) => ({type: 'SN/USERS/UNFOLLOW', userId} as const),\r\n    setUsers: (users: UsersType[]) => ({type: 'SN/USERS/SET_USERS', users} as const),\r\n    setCurrentPage: (currentPage: number) => ({type: 'SN/USERS/SET_CURRENT_PAGE', currentPage} as const),\r\n    setFilter: (filter: FilterType) => ({type: 'SN/USERS/SET_FILTER', payload: filter} as const),\r\n    setUsersTotalCount:(totalUsersCount: number) => ({type: 'SN/USERS/SET_TOTAL_USERS_COUNT', count: totalUsersCount} as const),\r\n    setToggleIsFetching: (isFetching: boolean) => ({type: 'SN/USERS/TOGGLE_IS_FETCHING', isFetching} as const),\r\n    toggleFollowingProgress: (isFetching: boolean, userId: number) => ({type: 'SN/USERS/TOGGLE_IS_FOLLOWING_PROGRESS', isFetching, userId} as const),\r\n}\r\n\r\nexport const requestUsers = (page: number, pageSize: number, filter: FilterType): ThunkType => {\r\n     return async (dispatch, getState) => {\r\n\r\n        dispatch(actions.setToggleIsFetching(true));\r\n        dispatch(actions.setCurrentPage(page));\r\n        dispatch(actions.setFilter(filter));\r\n\r\n        let data = await usersAPI.getUsers(page, pageSize, filter);\r\n        dispatch(actions.setToggleIsFetching(false));\r\n        dispatch(actions.setUsers(data.items));\r\n        dispatch(actions.setUsersTotalCount(data.totalCount));\r\n    }\r\n}\r\n\r\nconst _followUnfollowFlow = async (\r\n    dispatch: Dispatch<ActionsType>,\r\n    userId: number,\r\n    apiMethod: (userId: number) => Promise<APIResponseType>,\r\n    actionCreator: (userId: number) => ActionsType) => {\r\n    dispatch(actions.toggleFollowingProgress(true, userId));\r\n\r\n    let data = await apiMethod(userId);\r\n    if (data.resultCode === 0) {\r\n        dispatch(actionCreator(userId));\r\n    }\r\n    dispatch(actions.toggleFollowingProgress(false, userId));\r\n}\r\n\r\nexport const Follow = (userId: number): ThunkType => {\r\n    return async (dispatch, getState) => {\r\n        let apiMethod = await usersAPI.follow.bind(usersAPI);\r\n        let actionCreator = actions.followSuccess;\r\n        await _followUnfollowFlow(dispatch, userId, apiMethod, actionCreator);\r\n    }\r\n}\r\n\r\nexport const unFollow = (userId: number): ThunkType => {\r\n    return async (dispatch, getState) => {\r\n        let apiMethod = await usersAPI.unFollow.bind(usersAPI);\r\n        let actionCreator = actions.unfollowSuccess;\r\n        await _followUnfollowFlow(dispatch, userId, apiMethod, actionCreator);\r\n    }\r\n}\r\n\r\nexport default usersReducer;\r\n","import React, {useEffect} from 'react';\r\nimport styles from './users.module.css'\r\n\r\nimport {Useritem} from \"./Useritem\"\r\nimport Paginator from \"../../Common/Paginator/Paginator\";\r\nimport {UsersSearchForm} from \"./UsersSearchForm\";\r\nimport {FilterType, Follow, requestUsers, unFollow} from \"../../../redux/users-reduser\";\r\nimport {useSelector, useDispatch} from \"react-redux\";\r\nimport {\r\n    getCurrentPage,\r\n    getPageSize,\r\n    getUsersPage,\r\n    getTotalUsersCount,\r\n    getUsersFilter,\r\n    getFollowingInProgress\r\n} from \"../../../redux/users-selectors\";\r\nimport { useHistory } from 'react-router-dom';\r\nimport * as queryString from \"querystring\";\r\n\r\ntype QueryParamsType = { term?: string, page?: string, friend?: string };\r\nexport const Users: React.FC = (props) => {\r\n\r\n    const users = useSelector(getUsersPage);\r\n    const totalUsersCount = useSelector(getTotalUsersCount);\r\n    const currentPage = useSelector(getCurrentPage);\r\n    const pageSize = useSelector(getPageSize);\r\n    const filter = useSelector(getUsersFilter);\r\n    const followingInProgress = useSelector(getFollowingInProgress);\r\n\r\n    const history = useHistory();\r\n\r\n    const dispatch = useDispatch();\r\n\r\n    useEffect(() => {\r\n        const search = history.location.search.substring(1);\r\n        const parsed = queryString.parse(search) as QueryParamsType;\r\n\r\n        let actualPage = currentPage;\r\n        let actualFilter = filter;\r\n\r\n        if (parsed.page) actualPage = Number(parsed.page);\r\n        if (parsed.term) actualFilter = {...actualFilter, term: parsed.term as string};\r\n\r\n        switch (parsed.friend) {\r\n            case \"null\":\r\n                actualFilter = {...actualFilter, friend: null}\r\n                break;\r\n            case \"true\":\r\n                actualFilter = {...actualFilter, friend: true}\r\n                break;\r\n            case \"false\":\r\n                actualFilter = {...actualFilter, friend: true}\r\n                break;\r\n        }\r\n\r\n        dispatch(requestUsers(actualPage, pageSize, actualFilter));\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n\r\n        const query: QueryParamsType = {};\r\n\r\n        if (!!filter.term) query.term = filter.term;\r\n        if (filter.friend !== null) query.friend = String(filter.friend);\r\n        if (currentPage !== 1) query.page = String(currentPage);\r\n\r\n        history.push({\r\n            pathname: '/developers',\r\n            search: queryString.stringify(query)\r\n        });\r\n    }, [filter, currentPage]);\r\n\r\n    const onPageChanged = (pageNumber: number): void => {\r\n        dispatch(requestUsers(pageNumber, pageSize, filter));\r\n    }\r\n\r\n    const onFilterChanged = (filter: FilterType): void => {\r\n        dispatch(requestUsers(1, pageSize, filter));\r\n    }\r\n    const follow = (userId: number): void => {\r\n        dispatch(Follow(userId));\r\n    }\r\n\r\n    const unfollow = (userId: number): void => {\r\n        dispatch(unFollow(userId));\r\n    }\r\n\r\n\r\n    return (\r\n        <section className={`${styles.users}`}>\r\n            <UsersSearchForm\r\n                onFilterChanged={onFilterChanged}\r\n            />\r\n            <Paginator currentPage={currentPage}\r\n                       onPageChanged={onPageChanged}\r\n                       totalUsersCount={totalUsersCount}\r\n                       pageSize={pageSize} />\r\n            <div className={styles.usersList} >\r\n                {users.map(user => <Useritem\r\n                    user={user}\r\n                    key={user.id}\r\n                    followingInProgress={followingInProgress}\r\n                    unfollow={unfollow}\r\n                    follow={follow}\r\n                /> )}\r\n            </div>\r\n        </section>\r\n    )\r\n}\r\n\r\n","import React from 'react';\r\nimport {useSelector} from 'react-redux';\r\n\r\nimport Preloader from \"../../Common/Preloader/Preloader\";\r\nimport {getIsFetching} from \"../../../redux/users-selectors\";\r\nimport {Users} from \"./Users\";\r\n\r\nexport const UsersPage: React.FC = (props) => {\r\n\r\n    const isFetching = useSelector(getIsFetching);\r\n\r\n    return <>\r\n        <h2>Users list</h2>\r\n        {isFetching ? <Preloader /> : null}\r\n        <Users />\r\n    </>\r\n}\r\n\r\n\r\n\r\n\r\n","import {instance, APIResponseType, ResultCodesEnum, ResultCodesForCaptchaEnum} from \"./api\";\r\n\r\nexport type CheckAuthDataType = {\r\n\tid: number\r\n\temail: string\r\n\tlogin: string\r\n}\r\n\r\nexport type LoginResponseDataType = {\r\n\tuserId: number,\r\n}\r\n\r\nexport const AuthAPI = {\r\n\tcheckAuth() {\r\n\t\treturn instance.get<APIResponseType<CheckAuthDataType>>(`auth/me`,)\r\n\t\t\t.then(response => {\r\n\t\t\t\treturn response.data\r\n\t\t\t});\r\n\t},\r\n\tlogin(email: string, password: string, rememberMe = false, captcha: null | string = null) {\r\n\t\treturn instance.post<APIResponseType<LoginResponseDataType, ResultCodesEnum | ResultCodesForCaptchaEnum>>(`auth/login`, {\r\n\t\t\temail,\r\n\t\t\tpassword,\r\n\t\t\trememberMe,\r\n\t\t\tcaptcha\r\n\t\t}).then(res => res.data);\r\n\t},\r\n\tlogout() {\r\n\t\treturn instance.delete(`auth/login`);\r\n\t},\r\n}\r\n","import {instance, APIResponseType} from \"./api\";\r\n\r\ntype GetCaptchaUrlResponseType = {\r\n\turl: string\r\n}\r\nexport const securityAPI = {\r\n\tgetCaptchaUrl() {\r\n\t\treturn instance.get<GetCaptchaUrlResponseType>(`security/get-captcha-url`).then(res => res.data);\r\n\t}\r\n}\r\n","import {ResultCodesEnum, ResultCodesForCaptchaEnum} from \"../api/api\";\r\nimport {Action} from 'redux';\r\nimport {stopSubmit, FormAction} from \"redux-form\";\r\nimport {usersAPI} from \"../api/users-api\";\r\nimport {AuthAPI} from \"../api/auth-api\";\r\nimport {securityAPI} from \"../api/security-api\";\r\nimport {BaseThunkType, InferActionsTypes} from \"./redux-store\";\r\n\r\n\r\nlet initialState = {\r\n    userId: null as (number | null),\r\n    email: null as string | null,\r\n    login: null as string | null,\r\n    isAuth: false,\r\n    captchaUrl: null as string | null // if null, then captcha is not required\r\n};\r\ntype InitialStateType = typeof initialState;\r\ntype ActionsType = InferActionsTypes<typeof actions>;\r\ntype ThunkType = BaseThunkType<ActionsType | FormAction>;\r\n\r\nconst authReducer = (state = initialState, action: ActionsType): InitialStateType => {\r\n\r\n    switch (action.type) {\r\n        case 'SN/auth/SET_USER_DATA':\r\n        case 'SN/auth/SET_CAPTCHA_URL_SUCCESS':\r\n            return {\r\n                ...state,\r\n                ...action.payload,\r\n            }\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport const actions = {\r\n    setAuthUserData: (userId: number | null, email: string | null, login: string | null, isAuth: boolean) => ({\r\n        type: 'SN/auth/SET_USER_DATA',  payload: {userId, email, login, isAuth}\r\n    } as const),\r\n    getCaptchaUrlSuccess: (captchaUrl: string) => ({\r\n        type: 'SN/auth/SET_CAPTCHA_URL_SUCCESS',\r\n        payload: {captchaUrl}\r\n    })\r\n}\r\n\r\nexport const authUser = (): ThunkType => async (dispatch) => {\r\n        let authData = await AuthAPI.checkAuth();\r\n        if (authData.resultCode === ResultCodesEnum.Success) {\r\n            let {id, email, login} = authData.data;\r\n            dispatch(actions.setAuthUserData(id, email, login, true));\r\n        }\r\n}\r\n\r\n//thank creator\r\n\r\nexport const login = (email: string, password: string, rememberMe: boolean, captcha: string): ThunkType => async (dispatch) => {\r\n    //thank\r\n    const loginData = await AuthAPI.login(email, password, rememberMe, captcha);\r\n    if (loginData.resultCode === ResultCodesEnum.Success) {\r\n        //success, get auth data\r\n        await dispatch(authUser());\r\n    }\r\n    else {\r\n        if (loginData.resultCode === ResultCodesForCaptchaEnum.CaptchaIsRequired) {\r\n            await dispatch(getCaptchaUrl());\r\n        }\r\n        let message = loginData.messages.length > 0 ? loginData.messages[0] : \"Some error\";\r\n        await dispatch(stopSubmit(\"login\", {_error: message}));\r\n    }\r\n}\r\n\r\nexport const logout = (): ThunkType => async (dispatch) => {\r\n    const response = await AuthAPI.logout();\r\n    if (response.data.resultCode === ResultCodesEnum.Success) {\r\n        dispatch(actions.setAuthUserData(null, null, null, false));\r\n    }\r\n}\r\n\r\n//thank creator\r\nexport const getCaptchaUrl = (): ThunkType => async (dispatch) => {\r\n    //thank\r\n    const data = await securityAPI.getCaptchaUrl();\r\n    const captchaUrl = data.url;\r\n    dispatch(actions.getCaptchaUrlSuccess(captchaUrl));\r\n\r\n}\r\nexport default authReducer;\r\n","import {authUser} from \"./auth-reduser\";\r\nimport {InferActionsTypes} from \"./redux-store\";\r\n\r\nlet initialState = {\r\n    initialized: false\r\n}\r\n\r\nexport type InitialStateType = typeof initialState;\r\nexport type ActionsType =  InferActionsTypes<typeof actions>;\r\n\r\nconst appReducer = (state = initialState, action: ActionsType): InitialStateType => {\r\n\r\n    switch (action.type) {\r\n        case 'SN/APP/INITIALIZED_SUCCESS': {\r\n            return {\r\n                ...state,\r\n                initialized: true\r\n            };\r\n        }\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport const actions = {\r\n    initializedSuccess: () => ({type: 'SN/APP/INITIALIZED_SUCCESS'} as const)\r\n}\r\n\r\n\r\n\r\nexport const initializeApp = () => (dispatch: any) => {\r\n    let promise = dispatch(authUser());\r\n//If the promise is returned from several dispatch, then we wrap promises in an array.\r\n    Promise.all([promise]).then(() => {\r\n        dispatch(actions.initializedSuccess());\r\n    });\r\n}\r\n\r\nexport default appReducer;\r\n","\r\nlet initialState: any = {};\r\ntype  InitialStateType = typeof initialState;\r\nconst sidebarReducer = (state = initialState, action: any): InitialStateType => {\r\n    return state;\r\n}\r\nexport default sidebarReducer;\r\n","import {Action, applyMiddleware, combineReducers, compose, createStore} from \"redux\";\r\nimport profileReducer from \"./profile-reduser\";\r\nimport dialogsReducer from \"./dialogs-reduser\";\r\nimport sidebarReducer from \"./sidebar-reduser\";\r\nimport usersReducer from \"./users-reduser\";\r\nimport authReducer from \"./auth-reduser\";\r\nimport thunkMiddleware, {ThunkAction} from \"redux-thunk\";\r\nimport { reducer as formReducer } from 'redux-form';\r\nimport appReducer from \"./app-reduser\";\r\nimport chatReducer from \"./chat-reduser\";\r\n// import { createStore, applyMiddleware, compose } from 'redux';\r\n\r\n\r\nlet rootReducers = combineReducers({\r\n    profilePage: profileReducer,\r\n    dialogsPage: dialogsReducer,\r\n    sidebar: sidebarReducer,\r\n    usersPage: usersReducer,\r\n    auth: authReducer,\r\n    form: formReducer,\r\n    app: appReducer,\r\n    chat: chatReducer\r\n\r\n});\r\n\r\ntype RootReducerType = typeof rootReducers; // (globalstate: GLOBALSTATE) => GLOBALSTATE\r\nexport type AppStateType = ReturnType<RootReducerType>;\r\n\r\n;\r\n\r\nexport type InferActionsTypes<T> = T extends { [keys: string]: (...args: any[]) => infer U } ? U : never;\r\n\r\nexport type BaseThunkType<A extends Action, R = Promise<void>> = ThunkAction<R, AppStateType, unknown, A>;\r\n\r\n// @ts-ignore\r\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\r\n\r\nconst store = createStore(rootReducers, composeEnhancers(applyMiddleware(thunkMiddleware)));\r\n\r\n// @ts-ignore\r\nwindow.__store__ = store;\r\n\r\nexport default store;\r\n","import React, {Suspense} from 'react';\r\nimport Preloader from \"../components/Common/Preloader/Preloader\";\r\n\r\n\r\nexport function withSuspense<WCP>(WrappedComponent: React.ComponentType<WCP>) {\r\n    return (props: WCP) => {\r\n        return <Suspense fallback={<Preloader />}>\r\n            <WrappedComponent {...props}/>\r\n        </Suspense>\r\n    }\r\n}\r\n","import React from 'react';\r\nimport Class from './Login.module.css';\r\nimport {useDispatch, useSelector} from \"react-redux\";\r\nimport {InjectedFormProps, reduxForm} from \"redux-form\";\r\nimport {createField, GetStringKeys, Input} from \"../Common/FormsControls/FormsControls\";\r\nimport {maxLengthCreator, requiredField} from \"../../utils/validators\";\r\nimport {login} from \"../../redux/auth-reduser\";\r\nimport {Redirect} from \"react-router-dom\";\r\nimport {AppStateType} from \"../../redux/redux-store\";\r\n\r\ninterface ILoginFormOwnProps {\r\n    captchaUrl: string | null\r\n}\r\n\r\nconst maxLength30 = maxLengthCreator(30);\r\nconst LoginForm: React.FC<InjectedFormProps<LoginFormsValuesType, ILoginFormOwnProps> & ILoginFormOwnProps> = ({handleSubmit, error, captchaUrl}) => {\r\n    return (\r\n        <form onSubmit={handleSubmit}>\r\n            {createField<LoginFormValuesTypeKeys>(\"Email\", \"email\", Input, [requiredField, maxLength30], {type: \"text\"})}\r\n            {createField<LoginFormValuesTypeKeys>(\"Password\", \"password\", Input, [requiredField, maxLength30], {type: \"password\"})}\r\n            <div className={Class.checkboxWrap}>\r\n                {createField<LoginFormValuesTypeKeys>(\"Remember me\", \"rememberMe\", Input, [], {type: \"checkbox\"})}\r\n            </div>\r\n            {captchaUrl &&\r\n            <div>\r\n                <img src={captchaUrl} />\r\n                {createField<LoginFormValuesTypeKeys>(\"Captcha\", \"captcha\", Input, [requiredField], {})}\r\n            </div>\r\n            }\r\n            {error &&\r\n            <div className={Class.formSummaryError}>\r\n                {error}\r\n            </div>\r\n            }\r\n            <div>\r\n                <button>Login</button>\r\n            </div>\r\n        </form>\r\n    )\r\n}\r\n\r\nconst LoginReduxForm = reduxForm<LoginFormsValuesType, ILoginFormOwnProps>({form: 'login'})(LoginForm);\r\n\r\ntype MapStatePropsType = {\r\n\t// captchaUrl: string | null\r\n    isAuth: boolean\r\n}\r\ntype MapDispatchPropsType = {\r\n    login: (email: string, password: string, rememberMe: boolean, captcha: string) => void;\r\n}\r\n\r\ntype LoginFormsValuesType = {\r\n    captcha: string;\r\n    rememberMe: boolean;\r\n    email: string;\r\n    password: string;\r\n}\r\n// type LoginFormValuesTypeKeys = keyof LoginFormsValuesType;\r\ntype LoginFormValuesTypeKeys = GetStringKeys<LoginFormsValuesType>;\r\n\r\nexport const LoginPage: React.FC = (props) => {\r\n\r\n    const captchaUrl = useSelector((state: AppStateType) => state.auth.captchaUrl);\r\n    const isAuth = useSelector((state: AppStateType) => state.auth.isAuth);\r\n\r\n    const dispatch = useDispatch();\r\n\r\n    const onSubmit = (formData: LoginFormsValuesType) => {\r\n        dispatch(login(formData.email, formData.password, formData.rememberMe, formData.captcha));\r\n    }\r\n\r\n    if (isAuth) {\r\n        return <Redirect to={\"/profile\"} />\r\n    }\r\n\r\n    return (\r\n        <div className={Class.formLogin}>\r\n            <h1>Login</h1>\r\n            <LoginReduxForm onSubmit={onSubmit} captchaUrl={captchaUrl}/>\r\n        </div>\r\n    );\r\n}\r\n\r\n","import React from 'react';\r\nimport Class from './Logo.module.css';\r\nimport {NavLink} from \"react-router-dom\";\r\nimport LogoImg from \"../../../img/socialLogo.png\"\r\n\r\nconst Logo: React.FC = () => {\r\n    return (\r\n        <div className={Class.logoWrap}>\r\n            <NavLink to=\"/profile\" className={Class.logoLink}>\r\n                <img className={Class.logo} src={LogoImg} alt=\"logo\"/>\r\n            </NavLink>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Logo;\r\n","import React from 'react';\r\nimport Class from './footer.module.css';\r\nimport Logo from \"../Common/Logo/Logo\";\r\nimport {Layout} from \"antd\";\r\n\r\n\r\nconst {Header, Footer} = Layout;\r\nconst FooterContent: React.FC = () => {\r\n    return (\r\n        <Footer style={{textAlign: 'center', background: '#001529'}}>\r\n            <div className={Class.contentWrap}>\r\n                <Logo />\r\n            </div>\r\n        </Footer>\r\n\r\n\r\n    );\r\n}\r\n\r\nexport default FooterContent;\r\n","import {AppStateType} from \"./redux-store\";\r\n\r\n// select is a function that takes a state and returns a value.\r\n// We necessary reselect lib (function createSelector)\r\nexport const selectIsAuth = (state: AppStateType) => {//simple select\r\n\treturn state.auth.isAuth;\r\n}\r\nexport const selectCurrentUserLogin = (state: AppStateType) => {//simple select\r\n\treturn state.auth.login;\r\n}\r\n\r\n\r\n\r\n","import React from 'react';\r\nimport Class from './header.module.css';\r\nimport {Link, NavLink} from \"react-router-dom\";\r\nimport Logo from \"../Common/Logo/Logo\";\r\nimport {Avatar, Col, Menu, Row, Layout, Button} from \"antd\";\r\nimport {UserOutlined} from '@ant-design/icons';\r\nimport {useDispatch, useSelector} from \"react-redux\";\r\nimport {selectCurrentUserLogin, selectIsAuth} from \"../../redux/auth-selectors\";\r\nimport {logout} from \"../../redux/auth-reduser\";\r\n\r\nexport type MapHeaderPropsType = {}\r\n\r\n\r\nconst {Header} = Layout;\r\nexport const HeaderLoginInfo: React.FC<MapHeaderPropsType> = (props) => {\r\n\r\n\tconst isAuth = useSelector(selectIsAuth);\r\n\tconst login = useSelector(selectCurrentUserLogin);\r\n\r\n\tconst dispatch = useDispatch();\r\n\r\n\tconst logoutCallback = () => {\r\n\t\tdispatch(logout());\r\n\t}\r\n\r\n\treturn (\r\n\t\t<Header className=\"header\">\r\n\t\t\t<Row>\r\n                <Col span={2}>\r\n                    <div className=\"logo\">\r\n                        <Logo/>\r\n                    </div>\r\n                </Col>\r\n\t\t\t\t<Col span={18}>\r\n\t\t\t\t\t<Menu theme=\"dark\" mode=\"horizontal\" defaultSelectedKeys={['2']}>\r\n\t\t\t\t\t\t<Menu.Item key=\"1\">\r\n\t\t\t\t\t\t\t<Link to=\"/developers\">Developers</Link>\r\n\t\t\t\t\t\t</Menu.Item>\r\n\t\t\t\t\t\t{/*<Menu.Item key=\"2\">nav 2</Menu.Item>*/}\r\n\t\t\t\t\t\t{/*<Menu.Item key=\"3\">nav 3</Menu.Item>*/}\r\n\t\t\t\t\t</Menu>\r\n\t\t\t\t</Col>\r\n\t\t\t\t<Col span={4}>\r\n                    {isAuth\r\n                        ? <div className={Class.loginBlock}>\r\n                            <Avatar style={{backgroundColor: '#87d068',}} icon={<UserOutlined/>}/>\r\n                            <span className={`${Class.linc} ${Class.isLogin}`}>{login}</span>\r\n                            <Button onClick={logoutCallback}>Logout</Button>\r\n                        </div>\r\n                        : <>\r\n\t\t\t\t\t\t\t<Button>\r\n\t\t\t\t\t\t\t\t<Link className={Class.linc} to={'/login'}>Login</Link>\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t</>}\r\n\t\t\t\t</Col>\r\n\t\t\t</Row>\r\n\r\n\t\t</Header>\r\n\t);\r\n}\r\n","import React from 'react';\nimport 'antd/dist/antd.css';\nimport News from \"./components/Main/News/News\";\nimport Music from \"./components/Main/Music/Music\";\nimport Settings from \"./components/Main/Settings/Settings\";\n\nimport {BrowserRouter, Link, Redirect, Route, Switch, withRouter} from \"react-router-dom\";\nimport {UsersPage} from \"./components/Main/Users/UsersContainer\";\nimport {connect, Provider} from \"react-redux\";\nimport {compose} from \"redux\";\nimport Preloader from \"./components/Common/Preloader/Preloader\";\nimport {initializeApp} from \"./redux/app-reduser\";\nimport store, {AppStateType} from \"./redux/redux-store\";\nimport {withSuspense} from \"./hoc/withSuspense\";\nimport {LoginPage} from './components/Login/LoginPage';\nimport FooterContent from \"./components/Footer/footerContent\";\n\nimport {Breadcrumb, Layout, Menu} from 'antd';\nimport {LaptopOutlined, NotificationOutlined, UserOutlined} from '@ant-design/icons';\nimport {HeaderLoginInfo} from \"./components/Header/headerLoginInfo\";\n\nconst {SubMenu} = Menu;\nconst {Header, Content, Footer, Sider} = Layout;\n\n\nconst DialogsContainer = React.lazy(() => import('./components/Main/Dialogs/DialogsContainer'));\nconst ProfileContainer = React.lazy(() => import('./components/Main/Profile/ProfileContainer'));\nconst ChatPage = React.lazy(() => import('./pages/Chat/ChatPage'));\n\ntype MapPropsType = ReturnType<typeof mapStateToProps>;\ntype DispatchPropsType = {\n\tinitializeApp: () => void;\n};\n\n\nconst SuspendedDialogs = withSuspense(DialogsContainer);\nconst SuspendedProfile = withSuspense(ProfileContainer);\nconst SuspendedChatPage = withSuspense(ChatPage);\n\n// const SuspendedUsersContainer = withSuspense(UsersContainer);\n\nclass App extends React.Component<MapPropsType & DispatchPropsType> {\n\n\tcatchAllUnhandledErrors = (PromiseRejection: PromiseRejectionEvent) => {        //We caught all the raw errors.\n\t\tconsole.log('promiseRejectionEvent', PromiseRejection);\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.props.initializeApp();\n\t\twindow.addEventListener(\"unhandledrejection\", this.catchAllUnhandledErrors);\n\t}\n\n\tcomponentWillUnmount() {\n\t\t//Fires when the component is unmounted. Delete the event\n\t\twindow.removeEventListener(\"unhandledrejection\", this.catchAllUnhandledErrors);\n\t}\n\n\trender() {\n\n\t\tif (!this.props.initialized) {\n\t\t\treturn <Preloader/>\n\t\t}\n\t\treturn (\n\t\t\t<Layout style={{minHeight: '100vh'}}>\n\t\t\t\t<HeaderLoginInfo/>\n\t\t\t\t<Content style={{padding: '0 50px'}}>\n\t\t\t\t\t<Breadcrumb style={{margin: '16px 0'}}>\n\t\t\t\t\t\t<Breadcrumb.Item>Home</Breadcrumb.Item>\n\t\t\t\t\t\t<Breadcrumb.Item>List</Breadcrumb.Item>\n\t\t\t\t\t\t<Breadcrumb.Item>App</Breadcrumb.Item>\n\t\t\t\t\t</Breadcrumb>\n\t\t\t\t\t<Layout className=\"site-layout-background\" style={{padding: '24px 0'}}>\n\t\t\t\t\t\t<Sider className=\"site-layout-background\" width={200}>\n\t\t\t\t\t\t\t<Menu\n\t\t\t\t\t\t\t\tmode=\"inline\"\n\t\t\t\t\t\t\t\tdefaultSelectedKeys={['1']}\n\t\t\t\t\t\t\t\t//defaultOpenKeys={['sub1']}\n\t\t\t\t\t\t\t\tstyle={{height: '100%'}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<SubMenu key=\"sub1\" icon={<UserOutlined/>} title=\"My Profile\">\n\t\t\t\t\t\t\t\t\t<Menu.Item key=\"1\"><Link to=\"/profile\">Profile</Link></Menu.Item>\n\t\t\t\t\t\t\t\t\t<Menu.Item key=\"2\"><Link to=\"/dialogs\">Messages</Link></Menu.Item>\n\t\t\t\t\t\t\t\t\t<Menu.Item key=\"3\">option3</Menu.Item>\n\t\t\t\t\t\t\t\t\t<Menu.Item key=\"4\">option4</Menu.Item>\n\t\t\t\t\t\t\t\t</SubMenu>\n\t\t\t\t\t\t\t\t<SubMenu key=\"sub2\" icon={<LaptopOutlined/>} title=\"Developers\">\n\t\t\t\t\t\t\t\t\t<Menu.Item key=\"5\"><Link to=\"/developers\">Users</Link></Menu.Item>\n\t\t\t\t\t\t\t\t\t<Menu.Item key=\"6\"><Link to=\"/chat\">Chat</Link></Menu.Item>\n\t\t\t\t\t\t\t\t</SubMenu>\n\t\t\t\t\t\t\t\t<SubMenu key=\"sub3\" icon={<NotificationOutlined/>} title=\"subnav 3\">\n\t\t\t\t\t\t\t\t\t<Menu.Item key=\"10\">option10</Menu.Item>\n\t\t\t\t\t\t\t\t\t<Menu.Item key=\"11\">option11</Menu.Item>\n\t\t\t\t\t\t\t\t\t<Menu.Item key=\"12\">option12</Menu.Item>\n\t\t\t\t\t\t\t\t</SubMenu>\n\t\t\t\t\t\t\t</Menu>\n\t\t\t\t\t\t</Sider>\n\t\t\t\t\t\t<Content style={{padding: '0 24px', minHeight: 280}}>\n\t\t\t\t\t\t\t<Switch>\n\t\t\t\t\t\t\t\t<Route path={'/dialogs'} render={() => <SuspendedDialogs/>}/>\n\t\t\t\t\t\t\t\t<Route path={'/developers'} render={() => <UsersPage/>}/>\n\t\t\t\t\t\t\t\t<Route path={'/news'} render={() => <News/>}/>\n\t\t\t\t\t\t\t\t<Route path={'/music'} render={() => <Music/>}/>\n\t\t\t\t\t\t\t\t<Route path={'/settings'} render={() => <Settings/>}/>\n\t\t\t\t\t\t\t\t<Route path={'/login'} render={() => <LoginPage/>}/>\n\t\t\t\t\t\t\t\t<Route path={'/chat'} render={() => <SuspendedChatPage/>}/>\n\t\t\t\t\t\t\t\t<Route path={'/profile/:userId?'} render={() => <SuspendedProfile/>}/>\n\t\t\t\t\t\t\t\t<Route exact path={'/'} render={() => <Redirect to={'/profile'}/>}/>\n\t\t\t\t\t\t\t\t<Route path={'*'} render={() => <div>404 not found</div>}/>\n\t\t\t\t\t\t\t</Switch>\n\t\t\t\t\t\t</Content>\n\t\t\t\t\t</Layout>\n\t\t\t\t</Content>\n\t\t\t\t<FooterContent/>\n\t\t\t</Layout>\n\t\t);\n\t}\n}\n\nconst mapStateToProps = (state: AppStateType) => ({\n\tinitialized: state.app.initialized\n});\n\nlet AppContainer = compose<React.ComponentType>(\n\twithRouter,\n\tconnect(mapStateToProps, {initializeApp}))(App);\n\nconst SocialApp: React.FC = () => {\n\treturn (\n\t\t<BrowserRouter>\n\t\t\t<Provider store={store}>\n\t\t\t\t<AppContainer/>\n\t\t\t</Provider>\n\t\t</BrowserRouter>\n\t);\n}\n\nexport default SocialApp;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './normalize.css';\nimport SocialApp from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n            <SocialApp />,\n         document.getElementById('root'));\n\n// store.subscribe(() => {\n//     let state = store.getState();\n//     renderEntireTree(state);\n// });\n\nserviceWorker.unregister();\n","import React from \"react\";\r\nimport Class from './FormsControls.module.css';\r\nimport {Field, WrappedFieldMetaProps, WrappedFieldProps} from \"redux-form\";\r\nimport {FieldValidatorType} from \"../../../utils/validators\";\r\n\r\n// const submitMyForm = ({data, props}) => {\r\n//     const { createRecord, reset } = props;\r\n//     return createRecord(data).then(() => {\r\n//         reset();\r\n//         // do other success stuff\r\n//     });\r\n// }\r\n\r\ntype FormControlPropsType = {\r\n    meta: WrappedFieldMetaProps\r\n}\r\n\r\nconst FormControl: React.FC<FormControlPropsType> = ({meta: {touched, error}, children}) => {\r\n    const hasError = touched && error;\r\n    return (\r\n        <div className={Class.formControl + \" \" + (hasError ? Class.error : \"\")}>\r\n            <div className={Class.inputWrap}>\r\n                {children}\r\n\r\n            </div>\r\n            {hasError && <span>{error}</span>}\r\n\r\n        </div>\r\n    );\r\n}\r\n\r\n\r\nexport const Textarea: React.FC<WrappedFieldProps> = (props) => {\r\n    // Метод деструктуризации inpus, meta, ...props\r\n    const {input, meta, children, ...restProps} = props;\r\n    return <FormControl {...props}>\r\n        <textarea {...input} {...restProps} />\r\n    </FormControl>\r\n}\r\n\r\nexport type InputElementRestProps = {\r\n    type?: string\r\n    placeholder?: string\r\n}\r\n\r\n\r\n\r\nexport const Input: React.FC<WrappedFieldProps & InputElementRestProps> = (props) => {\r\n\r\n    const {input, meta, children, ...restProps} = props;\r\n    return <FormControl {...props}>\r\n        <input {...input} {...restProps} />\r\n        {restProps.type === \"checkbox\" &&\r\n        <label htmlFor={input.name}>{restProps.placeholder}</label>}\r\n    </FormControl>\r\n}\r\n\r\ntype LoginFormsValuesType = {\r\n    captcha: string;\r\n    rememberMe: boolean;\r\n    email: string;\r\n    password: string;\r\n}\r\n\r\n\r\n\r\nexport function createField<FormKeysType extends string>(\r\n    placeholder: string | undefined,\r\n    name: FormKeysType,\r\n    component: React.FC<WrappedFieldProps & InputElementRestProps>,\r\n    validateObj: Array<FieldValidatorType>,\r\n    props = {},\r\n    text = \"\") {\r\n    return (\r\n        <div className={Class.formControlWrap}>\r\n            <Field\r\n                placeholder={placeholder}\r\n                name={name}\r\n                component={component}\r\n                validate={validateObj}\r\n                {...props}\r\n            /> {text}\r\n        </div>\r\n    )\r\n}\r\nexport type GetStringKeys<T> = Extract<keyof T, string>;\r\n","import React from 'react';\r\nimport {Redirect} from \"react-router-dom\";\r\nimport {connect} from \"react-redux\";\r\nimport {AppStateType} from '../redux/redux-store';\r\n\r\nlet mapStateToPropsRedirect = (state: AppStateType) => ({\r\n    isAuth: state.auth.isAuth\r\n});\r\n\r\ntype MapPropsType = {\r\n    isAuth: boolean;\r\n}\r\n\r\ntype DispatchPropsType = {\r\n}\r\n\r\nexport function withAuthRedirect<WCP>(WrappedComponent: React.ComponentType<WCP>) {\r\n\r\n    const RedirectComponent: React.FC<MapPropsType & DispatchPropsType> = (props) => {\r\n        let {isAuth, ...restProps} = props;\r\n        if (!isAuth) {\r\n            return <Redirect to={'/login'}/>\r\n        }\r\n        return <WrappedComponent {...restProps  as WCP} />\r\n    }\r\n\r\n    let ConnectedAuthRedirectComponent = connect<MapPropsType, DispatchPropsType, WCP, AppStateType>(mapStateToPropsRedirect)(RedirectComponent);\r\n\r\n    return ConnectedAuthRedirectComponent;\r\n}\r\n","import React from 'react';\r\nimport loader from './../../../img/loader.gif';\r\nimport Class from './Preloader.module.css';\r\n\r\nlet Preloader: React.FC = () => {\r\n    return (\r\n        <div className={Class.wrap}>\r\n            <div className={Class.loadingWap}>\r\n                <img src={loader} />\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\nexport default Preloader;\r\n","export type FieldValidatorType = (value: string) => string | undefined;\r\n\r\nexport const requiredField: FieldValidatorType = (value) => {\r\n    //Check if there is a value in the input field\r\n    if (value)\r\n        return undefined;\r\n\r\n    return 'Field is required';\r\n}\r\n\r\nexport const maxLengthCreator = (maxLength: number): FieldValidatorType => (value) => {\r\n    if (value.length > maxLength)\r\n        return `Max length is ${maxLength} symbols`;\r\n\r\n    return undefined;\r\n}\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"formControlWrap\":\"FormsControls_formControlWrap__Xva8w\",\"inputWrap\":\"FormsControls_inputWrap__2KJLy\",\"formControl\":\"FormsControls_formControl__D45aS\",\"error\":\"FormsControls_error__3ac71\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"logo\":\"header_logo__HSrlB\",\"loginBlock\":\"header_loginBlock__36dag\",\"linc\":\"header_linc__dUUkx\",\"isLogin\":\"header_isLogin__1pR3g\"};"],"sourceRoot":""}